{% load static %}

<a name="hist"></a>
<article class="art3">
    <h1 class="C_title">history</h1>
    <div class="viewtable">
      <div class="table area" style="margin-right: 40px;" id="nonedata">
        <table class="table-box">
          <caption></caption>
          <thead>
            <tr class="table_title">
              <td><h1>User_ID</h1></td>
              <td><h1>Speed</h1></td>
              <td><h1>Battery</h1></td>
              <td><h1>Color</h1></td>
              <td><h1>Created_at</h1></td>
            </tr>
          </thead>
          <tbody>
            <tr >
              <td>None</td>
              <td>None</td>
              <td>None</td>
              <td>None</td>
              <td>None</td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="table area" style="margin-right:40px; display: none;" id="alldata">
        <table class="table-box">
          {% if mycars.exists %}
          <caption>  </caption>
          <thead>
            <tr class="table_title">
              <th><h1>User_ID</h1></th>
              <th><h1>Speed</h1></th>
              <th><h1>Battery</h1></th>
              <th><h1>Color</h1></th>
              <th><h1>Created_at</h1></th>
            </tr>
          </thead>
          {% for mycar in mycars %}
          <tbody>
            <tr>
              <td><h1>{{ mycar.user_name }}</h1></td>
              <td><h1>{{ mycar.mycar_speed }}</h1></td>
              <td><h1>{{ mycar.mycar_battery }}</h1></td>
              <td><h1>{{ mycar.mycar_color }}</h1></td>
              <td><h1>{{ mycar.created_at }}</h1></td>
              <td>
                {% if user_name %}
                <form action="{{ mycar.get_delete_url }}" method="post">
                  {% csrf_token %}
                  <button type="submit">삭제</button>
                </form>
                {% endif%}
              </td>
            </tr>
          </tbody>
          {% endfor %}
          {% endif %}
        </table>
      </div>

      <div class="table area" style="margin-right:40px; display: none;" id="speeddata">
        <table class="table-box">
          {% if mycars.exists %}
          <caption>   </caption>
          <thead>
            <tr class="table_title">
              <th><h1>User_ID</h1></th>
              <th><h1>Speed</h1></th>
              <th><h1>Battery</h1></th>
              <th><h1>Color</h1></th>
              <th><h1>Created_at</h1></th>
            </tr>
          </thead>
          {% for mycar in mycars %}
          {% if mycar.mycar_speed %}
          <tbody>
            <tr>
              <td><h1>{{ mycar.user_name }}</h1></td>
              <td><h1>{{ mycar.mycar_speed }}</h1></td>
              <td><h1>{{ mycar.mycar_battery }}</h1></td>
              <td><h1>{{ mycar.mycar_color }}</h1></td>
              <td><h1>{{ mycar.created_at }}</h1></td>
              <td>
                {% if user_name %}
                <form action="{{ mycar.get_delete_url }}" method="post">
                  {% csrf_token %}
                  <button type="submit">삭제</button>
                </form>
                {% endif%}
              </td>
            </tr>
          </tbody>
          {% endif %}
          {% endfor %}
          {% endif %}
        </table>
      </div>

      <div class="table area" style="margin-right:40px; display: none;" id="batterydata">
        <table class="table-box">
          {% if mycars.exists %}
          <caption>   </caption>
          <thead>
            <tr class="table_title">
              <th><h1>User_ID</h1></th>
              <th><h1>Speed</h1></th>
              <th><h1>Battery</h1></th>
              <th><h1>Color</h1></th>
              <th><h1>Created_at</h1></th>
            </tr>
          </thead>
          {% for mycar in mycars %}
          {% if mycar.mycar_battery %}
          <tbody>
            <tr>
              <td><h1>{{ mycar.user_name }}</h1></td>
              <td><h1>{{ mycar.mycar_speed }}</h1></td>
              <td><h1>{{ mycar.mycar_battery }}</h1></td>
              <td><h1>{{ mycar.mycar_color }}</h1></td>
              <td><h1>{{ mycar.created_at }}</h1></td>
              <td>
                {% if user_name %}
                <form action="{{ mycar.get_delete_url }}" method="post">
                  {% csrf_token %}
                  <button type="submit">삭제</button>
                </form>
                {% endif%}
              </td>
            </tr>
          </tbody>
          {% endif %}
          {% endfor %}
          {% endif %}
        </table>
      </div>

      <div class="table area" style="margin-right:40px; display: none;" id="colordata">
        <table class="table-box" id="testtable">
          {% if mycars.exists %}
          <caption>  </caption>
          <thead>
            <tr class="table_title">
              <th><h1>User_ID</h1></th>
              <th><h1>Speed</h1></th>
              <th><h1>Battery</h1></th>
              <th><h1>Color</h1></th>
              <th><h1>Created_at</h1></th>
            </tr>
          </thead>
          {% for mycar in mycars %}
          {% if mycar.mycar_color %}
          <tbody >
            <tr >
              <td><h1>{{ mycar.user_name }}</h1></td>
              <td><h1>{{ mycar.mycar_speed }}</h1></td>
              <td><h1>{{ mycar.mycar_battery }}</h1></td>
              <td><h1>{{ mycar.mycar_color }}</h1></td>
              <td><h1>{{ mycar.created_at }}</h1></td>
              <td>
                {% if user_name %}
                <form action="{{ mycar.get_delete_url }}" method="post">
                  {% csrf_token %}
                  <button type="submit">삭제</button>
                </form>
                {% endif%}
              </td>
            </tr>
          </tbody>
          {% endif %}
          {% endfor %}
          {% endif %}
        </table>
      </div>

      <div class="table area" style="margin-right:40px; display: none;" id="colred">
        <table class="table-box">
          {% if mycars.exists %}
          <caption> </caption>
          <thead>
            <tr class="table_title">
              <th><h1>User_ID</h1></th>
              <th><h1>Speed</h1></th>
              <th><h1>Battery</h1></th>
              <th><h1>Color</h1></th>
              <th><h1>Created_at</h1></th>
            </tr>
          </thead>
          {% for mycar in mycars %}
          {% if mycar.mycar_color == "#ff0000" %}
          
          <tbody>
            <tr>
              <td><h1>{{ mycar.user_name }}</h1></td>
              <td><h1>{{ mycar.mycar_speed }}</h1></td>
              <td><h1>{{ mycar.mycar_battery }}</h1></td>
              <td><h1>{{ mycar.mycar_color }}</h1></td>
              <td><h1>{{ mycar.created_at }}</h1></td>
              <td>
                {% if user_name %}
                <form action="{{ mycar.get_delete_url }}" method="post">
                  {% csrf_token %}
                  <button type="submit">삭제</button>
                </form>
                {% endif%}
              </td>
            </tr>
          </tbody>
          {% endif %}
          {% endfor %}
          {% endif %}
        </table>
      </div>

      <div class="table area" style="margin-right:40px; display: none;" id="colblue">
        <table class="table-box">
          {% if mycars.exists %}
          <caption>   </caption>
          <thead>
            <tr class="table_title">
              <th><h1>User_ID</h1></th>
              <th><h1>Speed</h1></th>
              <th><h1>Battery</h1></th>
              <th><h1>Color</h1></th>
              <th><h1>Created_at</h1></th>
            </tr>
          </thead>
          {% for mycar in mycars %}
          {% if mycar.mycar_color == "#0000ff" %}
          <tbody>
            <tr>
              <td><h1>{{ mycar.user_name }}</h1></td>
              <td><h1>{{ mycar.mycar_speed }}</h1></td>
              <td><h1>{{ mycar.mycar_battery }}</h1></td>
              <td><h1>{{ mycar.mycar_color }}</h1></td>
              <td><h1>{{ mycar.created_at }}</h1></td>
              <td>
                {% if user_name %}
                <form action="{{ mycar.get_delete_url }}" method="post">
                  {% csrf_token %}
                  <button type="submit">삭제</button>
                </form>
                {% endif%}
              </td>
            </tr>
          </tbody>
          {% endif %}
          {% endfor %}
          {% endif %}
        </table>
      </div>

      <div class="table area" style="margin-right:40px; display: none;" id="colgreen">
        <table class="table-box">
          {% if mycars.exists %}
          <caption>   </caption>
          <thead>
            <tr class="table_title">
              <th><h1>User_ID</h1></th>
              <th><h1>Speed</h1></th>
              <th><h1>Battery</h1></th>
              <th><h1>Color</h1></th>
              <th><h1>Created_at</h1></th>
            </tr>
          </thead>
          {% for mycar in mycars %}
          {% if mycar.mycar_color == "#00ff00" %}
          <tbody>
            <tr>
              <td><h1>{{ mycar.user_name }}</h1></td>
              <td><h1>{{ mycar.mycar_speed }}</h1></td>
              <td><h1>{{ mycar.mycar_battery }}</h1></td>
              <td ><h1>{{ mycar.mycar_color }}</h1></td>
              <p id="colin"></p>
              <td><h1>{{ mycar.created_at }}</h1></td>
              <td>
                {% if user_name %}
                <form action="{{ mycar.get_delete_url }}" method="post">
                  {% csrf_token %}
                  <button type="submit">삭제</button>
                </form>
                {% endif%}
              </td>
            </tr>
          </tbody>
          {% endif %}
          {% endfor %}
          {% endif %}
        </table>
      </div>

    </div>


  <div class="setting_box">
    <h3>SETTING</h3>
    <h5>기본설정은 1개만 설정됩니다.</h5>
    <div class="selectBox">
      <select name="modelss" class="select" id="osel" onchange="changemodel()" >
        <option value="null"> 원하는 내용을 선택해 주세요. </option>
        <option value="spdata">Speed</option>
        <option value="batdata">Battery</option>
        <optgroup label="Color 확인" style="color: black; background-color: rgb(255, 227, 66);">
          <option value="allcol">All Color</option>
          <option value="red">빨강</option>
          <option value="blue">파랑</option>
          <option value="green">초록</option>
        </optgroup>
        <option value="all">All Data</option>
      </select>
      
      <span class="icoArrow">&#9989;</span> </div>
    <br/>
    <br/>
    <div class="ckbox area">
      <label class="multi click" style="font-size: 20px;" >다중세팅
          <input type="checkbox" id="mtck" onclick="toggleMulti(this)" name="ckbox2" style="width: 20px;height: 20px;"/>
      </label>
    </br></br>
    </div>

  <form class="setting area" action="createmycar/" method="post">
      {% csrf_token %}
      <div id="selbox">
          <select id="selectbox" onchange="changemenu()" name="mycarselector">
              <option value="">기능 선택</option>
              <option value="speed" name="speed"> 속 도 </option>
              <option value="battery" name="battery"> 배 터 리 </option>
              <option value="color" name="color"> 색 상 </option>
          </select>
          <span class="icoArrow">&#9989;</span>
          
        <div class="textinput area" style="display: none;" id="mainbox">
          <br/>
          <input type="text" id="sett" name="number" placeholder="설정값 입력"/> 
        </div>
      </div>
      <div class="color area" id="colorbox" style="display: none;">
        <br/>
        <input type="color" name="number" style="width: 180px; height: 40px;">
      </div> 
    <br/>
    <br/>
    <div class="submin area" id="bt1" style="display: block;">
      &nsup; &nsup;
        <button class="btn-c" type="submit">
          <span></span>
          <span></span>
          <span></span>
          <span></span>
          전송
        </button>
    </div>
  </form>


  <form action="createmycarset/" method="post">
    {% csrf_token %}
      <div class="multiset" id="mtset" style="display: none;" >
          <div name="battery">
          <input type="range" min="0" max="100" id="bat" step="1" value="0" name="battery">
          <br/>
          <label for="bat">BATTERY : 
          <span id="batval" class="batval">0</span> % </label>
        </div>
          <div name="speed">
          <input type="range" min="0" max="100" id="spd" step="1" value="0" name="speed" >
          <br/>
          <label for="spd">SPEED :
          <output id="spdval" class="spdval">0</output> km/h </label>
          <br/>
          </div>
          <div name="color">
          <input type="color" id="col"  name="color" style="width: 120px; height: 30px;"><br/>
          <label>COLOR : <output for="col" class="col"></output></label>
          <br/>
          </div>
      </div>
    <div class="submin area" id="bt2" style="display: none;">
      &nsup; &nsup;
        <button class="btn-c" type="submit">
          <span></span>
          <span></span>
          <span></span>
          <span></span>
          전송
        </button>
    </div>
  </form>

  
    
</div>
</article>



<script>
function changemenu(value){
var selectvalSet = document.getElementById('selectbox');
const colorbox = document.getElementById('colorbox');
const mainbox = document.getElementById('mainbox');
const sett = document.getElementById('sett');
const bt1 = document.getElementById('bt1');
const bt2 = document.getElementById('bt2');
const bt3 = document.getElementById('bt3');

var setval = selectvalSet.options[selectvalSet.selectedIndex].value;

const setcolor = 'color';

if(setval == setcolor){
    colorbox.style.display = 'block';
    mainbox.style.display = 'none';
    sett.value = null ;
}else if(setval =="speed" || setval == "battery"){
  colorbox.style.display = 'none';
  mainbox.style.display = 'block';
}
else{
    colorbox.style.display = 'none';
    mainbox.style.display = 'none';
    sett.value = null ;
}
}
</script>


<script>
function toggleMulti(checkbox){     //다중선택
const selbox = document.getElementById('selbox'); //셀렉박스
const mtset = document.getElementById('mtset'); //멀티설정 div
const mtck = document.getElementById('mtck'); //멀티설정 checkbox
const bt1 = document.getElementById('bt1');
const bt2 = document.getElementById('bt2');
const sett = document.getElementById('sett');
const spd = document.getElementById('spd');
const bat = document.getElementById('bat');
const col = document.getElementById('col');


if(mtck.checked==true){
  selbox.style.display = 'none';
  mtset.style.display = 'block';
  bt1.style.display = 'none';
  bt2.style.display = 'block';
  sett.value = null;
}else{
  selbox.style.display = 'block';
  mtset.style.display = 'none';
  bt1.style.display = 'block';
  bt2.style.display = 'none';
  sett.value = null;
  spd.value = '0';
  bat.value = '0';
  col.value = '#FF0000';
  document.querySelector('#batval').innerHTML = 0;
  document.querySelector('#spdval').innerHTML = 0;
}

}

  document.querySelector('#bat').addEventListener('input',e=>{
  document.querySelector('#batval').innerHTML = e.target.value;
  });
  
  document.querySelector('#spd').addEventListener('input',e=>{
  document.querySelector('#spdval').innerHTML = e.target.value;
  });
  </script>

<script>    // 테이블 확인하는 내용
  function changemodel(){
    var modelsel = document.getElementById('osel');
    const nonedata = document.getElementById('nonedata');
    const alldata = document.getElementById('alldata');
    const speeddata = document.getElementById('speeddata');
    const batterydata = document.getElementById('batterydata');
    const colordata = document.getElementById('colordata');
    const colred = document.getElementById('colred');
    const colblue = document.getElementById('colblue');
    const colgreen = document.getElementById('colgreen');

    var selnum = modelsel.options[modelsel.selectedIndex].value;

    if(selnum == "null"){
      nonedata.style.display = 'block';
      alldata.style.display = 'none';
      speeddata.style.display = 'none';
      batterydata.style.display = 'none';
      colordata.style.display = 'none';
      colred.style.display = 'none';
      colblue.style.display = 'none';
      colgreen.style.display = 'none';
    }else if(selnum == 'spdata'){
      nonedata.style.display = 'none';
      alldata.style.display = 'none';
      speeddata.style.display = 'block';
      batterydata.style.display = 'none';
      colordata.style.display = 'none';
      colred.style.display = 'none';
      colblue.style.display = 'none';
      colgreen.style.display = 'none';
    }else if(selnum == 'batdata'){
      nonedata.style.display = 'none';
      alldata.style.display = 'none';
      speeddata.style.display = 'none';
      batterydata.style.display = 'block';
      colordata.style.display = 'none';
      colred.style.display = 'none';
      colblue.style.display = 'none';
      colgreen.style.display = 'none';
    }else if(selnum == 'chtime'){
      nonedata.style.display = 'none';
      alldata.style.display = 'none';
      speeddata.style.display = 'none';
      batterydata.style.display = 'none';
      colordata.style.display = 'none';
      colred.style.display = 'none';
      colblue.style.display = 'none';
      colgreen.style.display = 'none';
    }else if(selnum == 'red'){
      nonedata.style.display = 'none';
      alldata.style.display = 'none';
      speeddata.style.display = 'none';
      batterydata.style.display = 'none';
      colordata.style.display = 'none';
      colred.style.display = 'block';
      colblue.style.display = 'none';
      colgreen.style.display = 'none';
    }else if(selnum == 'green'){
      nonedata.style.display = 'none';
      alldata.style.display = 'none';
      speeddata.style.display = 'noen';
      batterydata.style.display = 'none';
      colordata.style.display = 'none';
      colred.style.display = 'none';
      colblue.style.display = 'none';
      colgreen.style.display = 'block';
    }else if(selnum == 'blue'){
      nonedata.style.display = 'none';
      alldata.style.display = 'none';
      speeddata.style.display = 'none';
      batterydata.style.display = 'none';
      colordata.style.display = 'none';
      colred.style.display = 'none';
      colblue.style.display = 'block';
      colgreen.style.display = 'none';
    }else if(selnum == 'allcol'){
      nonedata.style.display = 'none';
      alldata.style.display = 'none';
      speeddata.style.display = 'none';
      batterydata.style.display = 'none';
      colordata.style.display = 'block';
      colred.style.display = 'none';
      colblue.style.display = 'none';
      colgreen.style.display = 'none';
    }else{
      nonedata.style.display = 'none';
      alldata.style.display = 'block';
      speeddata.style.display = 'none';
      batterydata.style.display = 'none';
      colordata.style.display = 'none';
      colred.style.display = 'none';
      colblue.style.display = 'none';
      colgreen.style.display = 'none';
  }
}
  </script>


<script>
  function rowClicked() {

  var table =document.getElementById('testtable');
  var rowList = table.rows; // *1)rows collection

  for (i=1; i<rowList.length; i++) {//thead부분 제외.
    
      var row = rowList[i];
      var tdsNum = row.childElementCount;// 자식요소 갯수 구하기.
    
      row.onclick = function(){ 
          return function(){ 
        
          var str = "";  
          for (var j = 0; j < tdsNum; j++){//row안에 있는 값 순차대로 가져오기.
          
            var row_value = this.cells[j].innerHTML; //*2)cells collection
            str += row_value+' ';//값을 하나의 text값으로 만듦
            
        };//td for
            
        document.querySelector('p').innerText =str;//p태그 안에 값 넣어주기.
        
      };//return
    }(row);//onclick
  }//for
          
  }//function

  window.onload = rowClicked()
</script>

<script>
  $('#testtable').on("mouseover","tr",function(){
    console.log($(this).find("td:eq(3)").text());

    var tablecol = $(this).find("td:eq(3)").text();
    // console.log("현 색은 : " + tablecol)
    
    $(this).css("background-color",tablecol);
    // $( this).children("td").css( "cursor", "pointer" );
  });

  $('#testtable').on("mouseleave","tr",function() {
    $( this ).css( "background-color","#313131" );
});

</script>
